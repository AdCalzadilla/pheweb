<!doctype html>
<head>
<title>{% include 'title.html' %}</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/underscore@1.8.3/underscore.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/corejs-typeahead@1.2.1/dist/typeahead.bundle.min.js" integrity="sha256-VCsWOz+0GuHdS/sIICtQNTFJdbaDI80rxvoB7BXabrU=" crossorigin="anonymous"></script>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

{# LZ.js vendor bundle (includes d3) #}
<script src="https://cdn.jsdelivr.net/npm/locuszoom@{{ config.LZJS_VERSION }}/dist/locuszoom.vendor.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/d3-tip@0.6.7/index.min.js"></script>

<script type="text/javascript">
  window.model = window.model || {};
  window.model.urlprefix = {{ config.URLPREFIX|tojson }};
</script>

<link href="{{ url_for('.static', filename='common.css') }}" rel="stylesheet" type="text/css">
<script src="{{ url_for('.static', filename='common.js') }}" type="text/javascript"></script>

{% if config.SENTRY_DSN %}
  <script src="https://cdn.ravenjs.com/3.21.0/raven.min.js" crossorigin="anonymous"></script>
  <script type="text/javascript">
  Raven.config({{ config.SENTRY_DSN|tojson|safe }},
    {release: {{ config.PHEWEB_VERSION|tojson|safe }} }
  ).install()
  </script>
{% endif %}

{% if config['GOOGLE_ANALYTICS_TRACKING_ID'] %}
  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', '{{ config['GOOGLE_ANALYTICS_TRACKING_ID'] }}', 'auto');
    ga('send', 'pageview');
  </script>
{% endif %}
{% block in_head %}{% endblock %}
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  {% block navbar_brand %}
  <a class="navbar-brand" href="{{url_for('.homepage')}}">PheWeb</a>
  {% endblock %}

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">

    {% block navbar_left %}
    <form action="{{ url_for('.go') }}" class="form-inline" style="flex-grow:1">
      <div class="input-group" style="flex-grow:1; max-width:27em">
        <input id="mainsearch" type="text" name="query" class="form-control" autocomplete="off" placeholder="Search for a variant, gene, or phenotype" aria-label="Search">
        <div class="input-group-append"><button class="btn btn-outline-secondary" type="submit">Search</button></div>
      </div>
    </form>
    {% endblock %}

    <ul class="navbar-nav ml-auto">
      <li class="nav-item"><a class="nav-link" href="{{ url_for('.phenotypes_page') }}" style="color: #333; font-weight: bold;">Phenotypes</a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('.top_hits_page') }}" style="color: #333; font-weight: bold;">Top Hits</a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('.random_page') }}" style="color: #333; font-weight: bold;">Random</a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('.about_page') }}" style="color: #333; font-weight: bold;">About</a></li>
      {% if current_user and current_user.is_authenticated %}
      <li class="nav-item"><a class="nav-link" href="{{ url_for('.logout') }}" style="color: #333; font-weight: bold;">Logout ({{ current_user.email }})</a></li>
      {% endif %}
    </ul>
  </div>
</nav>

{% block body %}
<br>
<div class="container-fluid">
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <br><br> {# Don't get stuck behind the navbar #}
        {% for message in messages %}
          <div class="alert alert-danger" role="alert"><b>Error:</b> {{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    {% block contained %}
    {% endblock %}
    <div style="height:0; margin-top:0.6em"></div>
</div>
{% endblock %}
</body>
